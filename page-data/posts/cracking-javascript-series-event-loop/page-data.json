{"componentChunkName":"component---src-templates-post-template-js","path":"/posts/cracking-javascript-series-event-loop","result":{"data":{"markdownRemark":{"id":"9d5257de-a8cb-5aee-9c08-a2b2d4b1f22d","html":"<p>We may have heard that JavaScript executes all the operations on a single thread, but what is the magic empowering JavaScript to be an <strong>asynchronous programming language</strong>?\nEvent Loop is the rationale and forms the <strong>non-blocking feature</strong> like Node.js.</p>\n<p>First, we must keep in mind that <strong>Event Loop is related to the runtime environment</strong>, such as the browser or Node.js, not the JavaScript Engine(V8).</p>\n<p>To be more specific, Event Loop is an endless loop that waits for tasks, executes them, and then sleeps, waiting for more tasks.\nIt ensures all the tasks from WebAPIs(Browser) or C++ APIs(Node.js) could queue up for being pulled into the stack and finally become executed.\nIf you first get to know this topic and still feel a bit fuzzy, don‚Äôt worry, I will use the following graph to explain. ü§ì </p>\n<h2 id=\"basic-architecture\" style=\"position:relative;\"><a href=\"#basic-architecture\" aria-label=\"basic architecture permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Basic Architecture</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c0472535f14bcb1f85ce04e4cd282aac/ea941/js-event-loop.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 107.08333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAAAPoAAAD6AG1e1JrAAADmElEQVQ4y51Vy3IbVRT0PxBSLkkjzciS0MuWbEvz1ozmpdFblqXIsSExlKGKrCiziKuyCFCpFMUm7PkI1qzY8g18TdN3ZDlG9gYWrXvqXt2ec7rPmdlJHdr4Pg7x64sRqoaF9EEH0oGNpxUbGcbZpo1sg2vjdm1uodG5O5eInT1dx+vfP+DPv3/D+YWFT+oeqp0Q0cJHxXaRPfagtD3IG7Q85FrdBPK9faXtJw/YSdcstK/meHkzRdH08KQZ4pvrAH/9UYYzM7Db6kHW+Wdeyqo+ZCNEoROjYMdJLPbEmawFyB062BFpSjUbn9Zc5KwIu1oE+8TGs8sm8h0XGTNKLuZuCfPeCObqEsbyJRR38JGQ6x2h0u5CEVkYAVqTFSrBKYkH0E7OUY9nyPLpoqy0HmHpmvgh1vBjT8WCcYp7srpFKB9TE7Fhhqj2ZihEU2bXQ8mfI++MkdUDVN0hysEMc6+DN30Tb2IDp76LanSKeneEPSNaa7ghzFDUmh1gYRrQWy5K3R6cuQV1Qm2MHmokTGkhlr6Dn8bExMGC5LtqgHKnj6IVQ7pPmCWhIjIMDfQ0E0f9CO/fFXHzdoRG/zmqTj+5/Llv4cNII3RceBaetklIg4pm79+EOdWl+HOk/W/xxA3QZG/+/L6MV9c6JL2PijOARFlKho99cw0RZ6htye4/QkhjZHNCfIk9i/p5MUYvhtCnETIkqntj5PWQLcRW0dYQsTDjEUI3MUWidrLmoOKOqEmfxGNkWmHSFmVnmFwUKHcGzJgmMesKta37ExTMLVNEn+XYb4eDJVrjFRRmmWM7CEjMPsu1RPELzEQ8QOKkCChsqQO6X9h2OcuRKrBRW9MzNAan2O9Tz9vMFTXEEdsjWl0hWH2FZjRfT4aYnIRw+pBQHGY0zm84hXt2yf6LoY3PUPGGyHW7ODyZ4WA8wXG8wD4JRJY16lr3Jo8TCnHTLOvq5i2u3/2C6IuvkTpyUXAiSD0Hux6ngm2SOV6XmidBwVqX/6jLgjCldrF8dY2L716jxokp3jZs0YxhTc6hj1awZhdQuQpCQaTQ6Wp39LCxE1PoVJozLds0xI7QGj5jyQO+EDoohR6KgYc9ZiLGTEhU7Y4Tpz8jREs9dJkzK5NUuC2QOnKSkhR9Y4C/nnlhFM0QZxmWL/Dg5XDn2n2It4z6kWQbm/9s4uyGUKSaowH/FXKyOihT4yr1TEoWP9Lt9+D/YvN9EfE/fGq3zQYneEIAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/c0472535f14bcb1f85ce04e4cd282aac/8ac56/js-event-loop.webp 240w,\n/static/c0472535f14bcb1f85ce04e4cd282aac/d3be9/js-event-loop.webp 480w,\n/static/c0472535f14bcb1f85ce04e4cd282aac/e46b2/js-event-loop.webp 960w,\n/static/c0472535f14bcb1f85ce04e4cd282aac/f992d/js-event-loop.webp 1440w,\n/static/c0472535f14bcb1f85ce04e4cd282aac/882b9/js-event-loop.webp 1920w,\n/static/c0472535f14bcb1f85ce04e4cd282aac/57aca/js-event-loop.webp 2031w\"\n              sizes=\"(max-width: 960px) 100vw, 960px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/c0472535f14bcb1f85ce04e4cd282aac/8ff5a/js-event-loop.png 240w,\n/static/c0472535f14bcb1f85ce04e4cd282aac/e85cb/js-event-loop.png 480w,\n/static/c0472535f14bcb1f85ce04e4cd282aac/d9199/js-event-loop.png 960w,\n/static/c0472535f14bcb1f85ce04e4cd282aac/07a9c/js-event-loop.png 1440w,\n/static/c0472535f14bcb1f85ce04e4cd282aac/29114/js-event-loop.png 1920w,\n/static/c0472535f14bcb1f85ce04e4cd282aac/ea941/js-event-loop.png 2031w\"\n            sizes=\"(max-width: 960px) 100vw, 960px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/c0472535f14bcb1f85ce04e4cd282aac/d9199/js-event-loop.png\"\n            alt=\"js event loop\"\n            title=\"js event loop\"\n            loading=\"lazy\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>To execute an async function, the browser would utilize the four vital steps:</p>\n<ol>\n<li>Add a function into <a href=\"#call-stack\">Call Stack</a>. </li>\n<li>Handle the browser-related method in <a href=\"#webapis\">WebAPIs</a>. </li>\n<li>Queue all the tasks in <a href=\"#task-queue\">Task Queue</a>.</li>\n<li>Pull a task to Call Stack one at a time by <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/EventLoop\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Event Loop</a> till the queue is empty.</li>\n</ol>\n<p>PS: To make the whole story short, we only focus on the ‚ÄúStack‚Äù in the first step.\nIf you are interested in how the V8 JavaScript Engine works, you could check out the previous article <a href=\"/posts/cracking-javascript-series-javascript-engine#call-stack--memory-heap\">ü•ä Cracking JavaScript Series: JavaScript Engine.</a> </p>\n<h2 id=\"call-stack\" style=\"position:relative;\"><a href=\"#call-stack\" aria-label=\"call stack permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Call Stack</h2>\n<p>It represents the order of JavaScript code execution and keeps track of its place in a script that calls multiple functions. Whenever a function is finished, it is popped from the stack. It is a <strong>LIFO queue (Last In, First Out)</strong>.</p>\n<ul>\n<li>Enqueue\n<img src=\"https://i.imgur.com/W8NZfZv.gif\"> </li>\n<li>Dequeue\n<img src=\"https://i.imgur.com/AiKeOv7.gif\">\nBy the way, an anonymous function is the default function executed first in the Call Stack. It usually appears as a <code class=\"language-text\">main()</code> or <code class=\"language-text\">global()</code> function in the dev-tool of the browser.</li>\n<li>Whenever an error occurs, the browser would also show its stack position.\n<img src=\"https://i.imgur.com/MjTBoq0.png\"></li>\n<li>Stack Overflow\n<img src=\"https://i.imgur.com/Tl0zUvT.jpg\">\nSome may ask: ‚Äúhow many recursive function calls causes stack overflow?‚Äù\nThere is no standard answer, and it depends on your environment and function complexity. Here on OS X 10.13, I‚Äôm limited to 8192K by default.</li>\n</ul>\n<h2 id=\"webapis\" style=\"position:relative;\"><a href=\"#webapis\" aria-label=\"webapis permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://developer.mozilla.org/zh-TW/docs/Web/API\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">WebAPIs</a></h2>\n<p><em>Since V8 engine does not include ‚ÄúsetTimeout‚Äù, how does the browser execute it?</em></p>\n<p>JavaScript did not implement the APIs for web operations, but the <strong>browser</strong> did, and it could be divided into <strong>Browser Object Model (BOM)</strong> and <strong>Document Object Model (DOM)</strong>. Therefore, a standard JavaScript would contain the following three components:</p>\n<ol>\n<li>JavaScript Core (based on ECMAScript standard)</li>\n<li>BOM (Browser Object Model)</li>\n<li>DOM (Document Object Model)</li>\n</ol>\n<p><img src=\"https://i.imgur.com/gdcMX2y.png\"></p>\n<p>For example, <code class=\"language-text\">setTimeout()</code> method is defined on the <strong><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">WindowOrWorkerGlobalScope</a></strong> mixin(interface) and implemented by <strong>Window</strong> and <strong>WorkerGlobalScope</strong>. Those implementations belong to <strong><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Web Workers API</a></strong> so that we could use <code class=\"language-text\">window.setTimout()</code> or directly call <code class=\"language-text\">setTimout()</code> on our browsers. The followings are other methods that you may be familiar with also come from WindowOrWorkerGlobalScope:</p>\n<ul>\n<li>WindowOrWorkerGlobalScope.atob()</li>\n<li>WindowOrWorkerGlobalScope.btoa()</li>\n<li>WindowOrWorkerGlobalScope.clearInterval()</li>\n<li>WindowOrWorkerGlobalScope.clearTimeout()</li>\n<li>WindowOrWorkerGlobalScope.createImageBitmap()</li>\n<li>WindowOrWorkerGlobalScope.fetch()</li>\n<li>WindowOrWorkerGlobalScope.queueMicrotask()</li>\n<li>WindowOrWorkerGlobalScope.setInterval()</li>\n<li>WindowOrWorkerGlobalScope.setTimeout()</li>\n</ul>\n<h2 id=\"task-queue\" style=\"position:relative;\"><a href=\"#task-queue\" aria-label=\"task queue permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Task Queue</h2>\n<p>Task Queue could be the most complex but interesting field of asynchronous execution concept.\nFor a better understanding, I would break Task Queue into four parts to elaborate.</p>\n<ol>\n<li><a href=\"#definition-of-task\">Definition of Task</a></li>\n<li><a href=\"#macrotask-and-microtask\">Advanced: Macrotask and Microtask</a></li>\n<li><a href=\"#odd-case-of-the-combination-of-macrotasks-and-microtasks\">Advanced: Odd Case of the combination of Macrotasks and Microtasks.</a></li>\n</ol>\n<p>If you want to get a quick answer, part 1 would be enough, but if you still have time, I would suggest you dive into part2-3. :)</p>\n<h3 id=\"definition-of-task\" style=\"position:relative;\"><a href=\"#definition-of-task\" aria-label=\"definition of task permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Definition of Task</h3>\n<p>A task is any JavaScript code which is scheduled to be run by the standard mechanisms such as initially starting to run a program, an event callback being run, or an interval or timeout being fired. These all get scheduled on the task queue. </p>\n<p>Tasks get added to the task queue when:</p>\n<ul>\n<li>A new JavaScript program or subprogram is executed (such as from a console, or by running the code in a &#x3C;script> element) directly.</li>\n<li>An event fires, adding the event‚Äôs callback function to the task queue.</li>\n<li>A timeout or interval created with <code class=\"language-text\">setTimeout()</code> or <code class=\"language-text\">setInterval()</code> is reached, causing the corresponding callback to be added to the task queue.</li>\n</ul>\n<p>Keep in mind that the functions in the callback queue start getting executed only after:</p>\n<ul>\n<li>We have reached the end of the program</li>\n<li>There are no functions left to be executed in the call stack</li>\n</ul>\n<p>Here comes an example:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">foo</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"First\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">bar</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Second\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">500</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">baz</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Third\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">bar</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">baz</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><em>What‚Äôs the output?</em></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">\"First\"\n\"Third\"\n\"Second\"</code></pre></div>\n<ol>\n<li>We invoke <code class=\"language-text\">bar</code>. <code class=\"language-text\">bar</code> returns a <code class=\"language-text\">setTimeout</code> function.</li>\n<li>The callback we passed to <code class=\"language-text\">setTimeout</code> gets added to the Web API, the <code class=\"language-text\">setTimeout</code> function and <code class=\"language-text\">bar</code> get popped off the callstack.</li>\n<li>The timer runs, in the meantime <code class=\"language-text\">foo</code> gets invoked and logs First. foo returns (undefined),<code class=\"language-text\">baz</code> gets invoked, and the callback gets added to the queue.</li>\n<li><code class=\"language-text\">baz</code> <code class=\"language-text\">logs</code> Third. The event loop sees the callstack is empty after <code class=\"language-text\">baz</code> returned, after which the callback gets added to the call stack.</li>\n<li>The callback logs <code class=\"language-text\">Second</code>.</li>\n</ol>\n<p>Basically, the setTimeout needs to wait for all the code for queued messages to complete even though you specified a particular time limit for your setTimeout.</p>\n<p><figure class=\"md-figure\"><img src=\"https://i.imgur.com/9pqDma8.gif\"><figcaption>The diagram is identical for Node.js, instead of WebAPIs, we have in C++ APIs and the threading is hidden from you by C++.</figcaption></figure></p>\n<ul>\n<li>How about other WebAPIs like <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/GlobalEventHandlers/onclick\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">GlobalEventHandlers.onclick</a>?</li>\n</ul>\n<p>If we bind a click listener on a dom, it would be hooked on the WebAPIs and wait for triggering.\n<img src=\"https://i.imgur.com/gqimymv.png\"></p>\n<p>If we click too many times, the listener functions would be added to the callback queue, and whenever the call stack is empty, the event loop would pull another task from the callback queue to add it to the call stack for executing the code.\n<img src=\"https://i.imgur.com/kgGncRU.jpg\"></p>\n<p>The event loop proceeds to execute all the callbacks waiting in the task queue. Inside the task queue, the tasks are broadly classified into two categories, namely micro-tasks and macro-tasks.</p>\n<h3 id=\"macrotask-and-microtask\" style=\"position:relative;\"><a href=\"#macrotask-and-microtask\" aria-label=\"macrotask and microtask permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Macrotask and Microtask</h3>\n<p>The previous section explains the order between sync and async function.</p>\n<p>Likewise, the browser also prioritizes async functions according to two task types: Macrotask and Microtask.</p>\n<p><img src=\"https://i.imgur.com/YUs5Zfi.png\"></p>\n<h4 id=\"macrotasks\" style=\"position:relative;\"><a href=\"#macrotasks\" aria-label=\"macrotasks permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Macrotasks</h4>\n<ul>\n<li>Macro-task represents some <strong>discrete and independent work.</strong> These are always the execution of the JavaScript code and micro-task queue is empty. Macro-task queue is often considered the same as the task queue or the event queue. However, the only small difference between the two is that the <strong>task queue is used for synchronous statements</strong> whereas the <strong>macro-task queue is used for asynchronous statements.</strong></li>\n<li>In JavaScript, no code is allowed to execute until an event has occurred. It is worth mentioning that the execution of a JavaScript code execution is itself a macro-task. The event is queued as a macro-task. When a (macro) task, present in the macro-task queue is being executed, new events may be registered and in turn, created and added to the queue.</li>\n<li>In comparison, the <strong>macro-task queue has a lower priority.</strong> Macro-tasks include parsing HTML, generating DOM, executing main thread JavaScript code, and other events such as page loading, input, network events, timer events, etc.</li>\n</ul>\n<p><strong>Examples:</strong> setTimeout, setInterval, setImmediate, requestAnimationFrame, I/O, UI Rendering</p>\n<h4 id=\"microtasks\" style=\"position:relative;\"><a href=\"#microtasks\" aria-label=\"microtasks permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Microtasks</h4>\n<ul>\n<li>A micro-task is said to be a function that is executed after the function or program which created it exits and only if the JavaScript execution stack is empty, but before returning control to the event loop being used by the user agent to drive the script‚Äôs execution environment. A Micro-task is also capable of en-queuing other micro-tasks.</li>\n<li>Micro-tasks are often scheduled for things that are required to be completed immediately after the execution of the current script. <strong>On completion of one macro-task, the event loop moves on to the micro-task queue.</strong> The event loop does not move to the next task outside of the micro-task queue until all the tasks inside the micro-task queue are completed. This implies that the <strong>micro-task queue has a higher priority.</strong></li>\n<li>Once all the tasks inside the micro-task queue are finished, only then does the event loop shift back to the macro-task queue. The primary reason for prioritizing the micro-task queue is to <strong>improve the user experience.</strong> The micro-task queue is processed after callbacks given that any other JavaScript is not under mid-execution. Micro-tasks include mutation <strong>observer callbacks</strong> as well as <strong>promise callbacks.</strong></li>\n</ul>\n<p><strong>Examples:</strong> process.nextTick, <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Promises</a>, <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">queueMicrotask</a>, MutationObserver</p>\n<p>What‚Äôs the output of the following code:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token function\">a</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"timeout\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nPromise<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token function\">b</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"promise\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"global ex. context\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<blockquote>\n<p><a href=\"https://www.jsv9000.app/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">online visualization</a>\n<img src=\"https://i.imgur.com/AnGzvBa.png\">\n<img src=\"https://i.imgur.com/WB58Y82.png\"></p>\n</blockquote>\n<p>The answer would be:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">\"global ex. contenxt\"\n\"promise\"\n\"timeout\"</code></pre></div>\n<p><figure class=\"md-figure\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 866px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/17660f2ec8245f8572b1f68e741dd7f5/c1328/task-queue-composition.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 127.91666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAaCAYAAAC3g3x9AAAACXBIWXMAAAsTAAALEwEAmpwYAAADzElEQVRIx51Uy27bVhDVf7e7IkAXRVcNUKBFgqRp4i6cxIDd1GhQ10kVGbEjy40ky3qQokiJokS9KFFv+3TOyGRpLQIkFyDu5X2cmTlzZlI3Nzfg4Bytt0d0pue3dyaTCTzPQ9fvotPpYLVa6X5qNpvpYfQNh8P4G41GGI/Hd87D6RSr9RqLxQLhJNR7fs/HVPbXsp8KwxDX19dqgR64rgvLsmDbNhzHwWAwiM85N9wO7O4QiyXQajfQ6/viNUDHaDxF5O2QOfNxMtTozPF6sLwA2eIJdl//gD8zT2G3DLTbnkagIdPV6EHkKUdyX9dipNXpw2wPcJI/wtP97/Di9Y+w3apEsqEpRVSGRWDy4vu+zguJiWvu0wgvB8IpQ3b8AEG4gGmVhNNADZK6oYAqh82Wi9l8juVyqeBMxmw6kTlQwE3ixptP7s8Wc1TMGjKnZyiUy+gNB5oUvk2NxwEO93YwF4CBAOUKH1Gq1SS8FQbOMcKRoR4cnWdxlP2g67kYOH5/gicvd/Hr3i6KRhVzcUgBlxJOIfMHRp0mSmYdRQErVGoYB30M7FcY+ZdYi8RO8h+RyecVkG86IhWjYcGwGwiEtthDIucu/kW/3xc99ZBOv0O9bmnYp2dnaHttBTENA0a1GqtAgYUiqiHmkEkhP41GQ9FphfojGC9wn2sapT5brVYsYIpvIsLmOZM4HI42gBQjL/DRQizyUaVSQVW8MU0TPfGaD+jNWmK3XQ+tXoC50NByHRF2T/gWXiVRqsOksLfrNlnb/wvbR9nu4qKSxau3D5A+34PXceBFwiZgVBnJEuMe15HQI67qTRfFuoO3uUM8fH4Pzw6+l72S5IDCHmx0mCw1crnhCEoDJaKVcgtYtRwYbR+j6QJl4wKjsa/7dEw5JCB51K7CTAWBuj6l4CURzm0ieM67XteXO2OUKWxRwWW1clfYG66uYy/zb/7CLJyo1Xu/PMLXP/90x0MmaCLgmVwWz/ZfYGf/JUp1A8vFpspSEXccI8no4YP7cK1NdXzz+BG+igBvGwVpCCQKSwRdvCqjcFUSrzu6pyFHYAyJMqEOTdPQxtBqNkXkda1ljsg4JcThti0BGsR8a5aTCdlu+8l1BBZTU36n7ev344cwpOuwH2qDTV761Jc0zPDPC2/w+Pm3+O3gvjTYmkQx1/L9LMCkHterG+mHV1IhYUwHVZDaroxPfUnBX1bL+DudxvvcOdyup/sa8ucCcjBJ/3w4xRPphTsHe7gUTUaJ/SIPOfdFzLaowKib2vYo7DjLXwIaDf6vhQIKnuv/AOd1vAEOHWWgAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/17660f2ec8245f8572b1f68e741dd7f5/8ac56/task-queue-composition.webp 240w,\n/static/17660f2ec8245f8572b1f68e741dd7f5/d3be9/task-queue-composition.webp 480w,\n/static/17660f2ec8245f8572b1f68e741dd7f5/e299d/task-queue-composition.webp 866w\"\n              sizes=\"(max-width: 866px) 100vw, 866px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/17660f2ec8245f8572b1f68e741dd7f5/8ff5a/task-queue-composition.png 240w,\n/static/17660f2ec8245f8572b1f68e741dd7f5/e85cb/task-queue-composition.png 480w,\n/static/17660f2ec8245f8572b1f68e741dd7f5/c1328/task-queue-composition.png 866w\"\n            sizes=\"(max-width: 866px) 100vw, 866px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/17660f2ec8245f8572b1f68e741dd7f5/c1328/task-queue-composition.png\"\n            alt=\"task queue composition\"\n            title=\"task queue composition\"\n            loading=\"lazy\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span><figcaption>The recap of Macrotask &#x26; Microtask</figcaption></figure></p>\n<p><em>However, in the real scenario, nuance always exists and it <a href=\"https://stackoverflow.com/questions/50754030/event-loop-prefers-microtask-queue-over-callback-queue\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">may not match our understanding </a> of the rule ‚ÄúMicro Queue is prior than the Marco Queue.‚Äù</em></p>\n<h3 id=\"odd-case-of-the-combination-of-macrotasks-and-microtasks\" style=\"position:relative;\"><a href=\"#odd-case-of-the-combination-of-macrotasks-and-microtasks\" aria-label=\"odd case of the combination of macrotasks and microtasks permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Odd Case of the combination of Macrotasks and Microtasks</h3>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">display</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Fetch resolved!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">printHello</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Callback Time\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">blockExecution</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Blocking execution...\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Dont close the alert until 2000ms\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> futureData <span class=\"token operator\">=</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"https://jsonplaceholder.typicode.com/todos/1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nfutureData<span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span> <span class=\"token operator\">=></span> response<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span>display<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span>printHello<span class=\"token punctuation\">,</span> <span class=\"token number\">2000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> p <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"I'm making a promise...\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Promise resolved!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Promise is made...\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\np<span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span>\n    <span class=\"token comment\">// this is called the success handler</span>\n    <span class=\"token parameter\">result</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">blockExecution</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Execution ended!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li>Q: What‚Äôs the output?</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">I'm making a promise...\nPromise is made...\nBlocking execution...\n\n1. Me first !\n   hi back from fetch\n   hello\n   actual output :\n\n2. Me first !\n   hello\n   hi back from fetch</code></pre></div>\n<ul>\n<li>A: Both 1, 2 could be the answer!!</li>\n</ul>\n<p>‚ùóÔ∏èNote: If the <code class=\"language-text\">blockExecution()</code> function block the thread long enough (over 2000ms), <strong>the <code class=\"language-text\">printHello()</code> function in the ‚ÄúMarco Queue‚Äù would be earlier pulled to the ‚ÄúCall Stack‚Äù than the <code class=\"language-text\">display()</code> function in the ‚ÄúMicro Queue‚Äù</strong>, so the answer would be:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">I'm making a promise...\nPromise is made...\nBlocking execution...\nExecution ended!\nPromise resolved!\n------\nCallback Time\nFetch resolved!</code></pre></div>\n<ul>\n<li>Vice versa, if the <code class=\"language-text\">blockExecution()</code> function does not block the thread long enough(below 2000ms), the result would be: </li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">I'm making a promise...\nPromise is made...\nBlocking execution...\nExecution ended!\nPromise resolved!\n------\nFetch resolved!\nCallback Time</code></pre></div>\n<ul>\n<li>Surprisingly, it seems like the first circumstance violates the rule. Nevertheless, both cases strongly prove the truth of the rule. Remember, the ‚ÄúEvent Loop‚Äù would always try to fill the call stack whenever the stack is empty. If a Microtask does not even finish its job (get a response from <code class=\"language-text\">fetch()</code>), and the Macrotask has completed its work (setTimeout() get executed as soon as the delay time reach 2000ms), the Event Loop would pull the Macrotask first to the call stack. What a workaholic machine, right?üòÖ. </li>\n</ul>\n<h2 id=\"how-to-define-a-blocking-code\" style=\"position:relative;\"><a href=\"#how-to-define-a-blocking-code\" aria-label=\"how to define a blocking code permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>How to define a ‚ÄúBlocking‚Äù code?</h2>\n<p>When people say don‚Äôt block the event loop, it‚Äôs saying don‚Äôt put shitty slow code on the call stack because when you do that, the browser can not create a nice fluid UI.</p>\n<ul>\n<li>Run the blocking code synchronously. (forEach)\n<img src=\"https://i.imgur.com/jzJMbol.jpg\"></li>\n<li>Run the blocking code asynchronously. (setTimeout)\n<img src=\"https://i.imgur.com/BviXHPO.jpg\"></li>\n<li>Since the render queue get a higher priority than the callback queue (repaint in every 16.6 milliseconds: 60 frames/ per second), the difference between the two is that the asynchronous method gives render a chance within each element.\n<img src=\"https://i.imgur.com/Rvv1cUA.jpg\"></li>\n</ul>\n<h2 id=\"conclusion\" style=\"position:relative;\"><a href=\"#conclusion\" aria-label=\"conclusion permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Conclusion</h2>\n<p>We have learned about the JavaScript event loop which is a constantly running process that coordinates the tasks between the call stack and callback queue to achieve concurrency. </p>\n<h2 id=\"reference\" style=\"position:relative;\"><a href=\"#reference\" aria-label=\"reference permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reference</h2>\n<ol>\n<li><a href=\"https://www.youtube.com/watch?v=8aGhZQkoFbQ\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Philip Roberts | JSConf EU </a></li>\n<li><a href=\"https://levelup.gitconnected.com/asynchronous-javascript-part-3-85390632dd1a\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://levelup.gitconnected.com/asynchronous-javascript-part-3-85390632dd1a</a></li>\n<li><a href=\"https://towardsdev.com/event-loop-in-javascript-672c07618dc9\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://towardsdev.com/event-loop-in-javascript-672c07618dc9</a></li>\n</ol>","fields":{"slug":"/posts/cracking-javascript-series-event-loop","tagSlugs":["/tag/java-script/","/tag/web-development/","/tag/event-loop/","/tag/asynchronous/","/tag/software-development/"]},"frontmatter":{"date":"2021-06-03T22:40:32.169Z","description":"Call Stack, Web APIs, Event Queue, Micro-tasks, and Macro-tasks","tags":["JavaScript","Web Development","Event Loop","Asynchronous","Software Development"],"title":"ü•ä Cracking JavaScript Series: Event Loop","socialImage":{"publicURL":"/static/c0472535f14bcb1f85ce04e4cd282aac/js-event-loop.png"}}}},"pageContext":{"slug":"/posts/cracking-javascript-series-event-loop"}},"staticQueryHashes":["251939775","3983120721","401334301"]}